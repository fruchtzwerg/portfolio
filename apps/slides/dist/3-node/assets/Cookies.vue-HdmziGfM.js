import{d as g,z as V,o as p,c as h,t as K,a1 as I,k as u,l as d,ae as b,e as x,S as f,R as O,a2 as R,K as z,D as q,b as M,F as L,ak as P,av as T}from"./modules/vue-DqyYkKqv.js";import{F as D,j as B,X as U,C as W,k as X,D as Z,E as G,y as N}from"./md-BLW5X4md.js";import{r as H}from"./EmptyState.vue-BJiV2tr9.js";import{m as J,g as Q}from"./SidebarButton.vue-Dwlgezl5.js";import{h as Y,b as y,_ as ee,a as ae}from"./CommandActionInput.vue-h_ItZ7kG.js";import{u as oe}from"./ViewLayout.vue-BS7YKYay.js";import{x as le}from"./ViewLayoutContent.vue-hARDt20b.js";import{_ as te}from"./ViewLayoutSection.vue-qkkO6JVP.js";import{q as se}from"./Form.vue-CJ7lCxI4.js";import"./modules/unplugin-icons-Oe2e3nhT.js";import"./slidev/context-5ERYHSt8.js";import"./index-vLjcKSoT.js";import"./modules/shiki-DBUm8ogk.js";import"./modules/file-saver-BdX_bMbV.js";import"./fuse-Ch1WBRTM.js";import"./layout-helper-BPQt8DFN.js";import"./ScalarAsciiArt.vue-DV7aYqb6.js";import"./ScalarHotkey.vue-nmq20aUh.js";import"./DeleteSidebarListElement.vue-CN0nbuaK.js";const ie=g({__name:"CookieForm",setup(C){const{activeCookieId:m}=D(),{cookies:k,cookieMutators:v}=B(),a=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],r=V(()=>k[m.value]||U.parse({name:"",value:"",domain:"",path:""})),_=(i,e)=>{v.edit(m.value,i,e)};return(i,e)=>(p(),h(se,{data:r.value,onUpdate:_,options:a},null,8,["data"]))}}),ue={class:"flex h-8 items-start gap-2 text-sm"},ne={class:"flex h-8 items-start gap-2 text-sm"},de={class:"flex h-8 items-start gap-2 text-sm"},me=g({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(C,{emit:m}){const k=C,v=m,a=K({name:"",value:"",domain:""}),{toast:r}=X(),_=()=>{if(!a.value.name||!a.value.value){r("Please fill in all fields before adding a cookie.","error");return}v("submit",a.value),k.state.hide()};return I(()=>k.state.open,i=>{i&&(a.value={name:"",value:"",domain:""})}),(i,e)=>(p(),h(f(W),{size:"xs",state:i.state,title:"Add Cookie"},{default:u(()=>[d(Y,{disabled:!a.value.name||!a.value.value,onCancel:e[3]||(e[3]=n=>v("cancel")),onSubmit:_},{submit:u(()=>e[7]||(e[7]=[b("Add Cookie")])),default:u(()=>[x("div",ue,[e[4]||(e[4]=b(" Name: ")),d(y,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.name=n),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),x("div",ne,[e[5]||(e[5]=b(" Value: ")),d(y,{modelValue:a.value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.value=n),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),x("div",de,[e[6]||(e[6]=b(" Domain: ")),d(y,{modelValue:a.value.domain,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.domain=n),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),re=Z(me,[["__scopeId","data-v-694018d6"]]),ce={class:"flex-1"},pe={class:"relative mb-[.5px] last:mb-0"},Se=g({__name:"Cookies",setup(C){const{cookies:m,cookieMutators:k,events:v,workspaceMutators:a}=B(),{activeWorkspace:r,activeCookieId:_}=D(),i=O(),e=R(),n=G(),j=t=>{var l,o;const s=U.parse({name:t.name,value:t.value,domain:t.domain,path:"/"});k.add(s),a.edit((l=r.value)==null?void 0:l.uid,"cookies",[...((o=r.value)==null?void 0:o.cookies)??[],s.uid]),i.push({name:"cookies",params:{cookies:s.uid}})},S=t=>{var l,o;k.delete(t),a.edit((l=r.value)==null?void 0:l.uid,"cookies",[...(((o=r.value)==null?void 0:o.cookies)??[]).filter(c=>c!==t)]);const s=Object.values(m).filter(c=>c.uid!==t);if(s.length>0){const c=s[s.length-1];c&&i.push(c.uid)}else i.push({name:"cookies",params:{[N.Cookies]:"default"}})},w=()=>{n.show()},$=t=>{t!=null&&t.createNew&&e.name==="cookies"&&w()},A=(t,l)=>{var o;const s={name:"cookies",params:{workspace:((o=r.value)==null?void 0:o.uid)??"default",cookies:l}};if(t.metaKey){const c=i.resolve(s).href;window.open(c,"_blank");return}i.push(s)};z(()=>v.hotKeys.on($)),q(()=>v.hotKeys.off($));const E=V(()=>m[_.value]),F=V(()=>Object.keys(m).length>0&&E.value);return(t,l)=>(p(),h(oe,null,{default:u(()=>[d(f(J),{title:"Cookies"},{content:u(()=>[x("div",ce,[d(ee,null,{default:u(()=>[(p(!0),M(L,null,P(Object.values(f(m)),o=>(p(),M("li",{key:o.uid,class:"gap-1/2 flex flex-col"},[x("div",pe,[(p(),h(ae,{key:o.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[f(N).Cookies]:o.uid}},type:"cookies",variable:{name:o.name,uid:o.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:T(s=>A(s,o.uid),["prevent"]),onDelete:s=>S(o.uid)},null,8,["to","variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:u(()=>[d(Q,{click:w,hotkey:"N"},{title:u(()=>l[1]||(l[1]=[b(" Add Cookie ")])),_:1})]),_:1}),d(le,{class:"flex-1"},{default:u(()=>[F.value?(p(),h(te,{key:0,class:"*:border-b-0"},{title:u(()=>l[2]||(l[2]=[b("Edit Cookie")])),default:u(()=>[d(ie)]),_:1})):(p(),h(H,{key:1}))]),_:1}),d(re,{state:f(n),onCancel:l[0]||(l[0]=o=>f(n).hide()),onSubmit:j},null,8,["state"])]),_:1}))}});export{Se as default};
